<div class="eventList">

<h3>List Events <i class="bi bi-calendar-event "></i></h3>
<br />
<div class="d-flex flex-nowrap">

<input class="form-control mainLoginInput" type="text" name="search" [(ngModel)]="term" autocomplete="off" placeholder="Search"> 
<a routerLink="/event" type="button" class="btn btn-secondary " style="margin-left:10px;"><i class="bi bi-plus-circle"></i></a> 
</div>

<div class="form">

<table class="table table-striped">
  <thead>
  <tr>
    <th scope="col">#</th>
    <th scope="col" sortable="name" >Event topic</th>
    <th scope="col" sortable="area" >Description</th>
    <th scope="col" sortable="population">Date</th>
    <th scope="col" sortable="population">#</th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let e of events  | filter:term | paginate: { itemsPerPage: 4, currentPage: p} let index = index ">
    <th scope="row">{{index}}</th>
    <td>
      
      {{e.eventTopic}}
    </td>
    <td>{{e.description}}</td>
    <td>{{e.date | date  }}</td>
    <td>
      <button type="button" class="btn btn-secondary" (click)="editEvent(e.id,Event)"><i class="bi bi-pencil-square pl-5"></i></button>&nbsp;
      <button type="button" class="btn btn-danger" (click)="deleteEvent(e.id)"><i class="bi bi-trash3"></i></button>
    </td>
 
  </tr>
  </tbody>
</table>

</div>
<div class="paginator">
    <pagination-controls (pageChange)="p = $event"></pagination-controls>
</div>
</div>

<ng-template #Event let-modal >
    <div class="modal-header">
        Update Event 
    </div>
    <div class="modal-body">
      <form [formGroup]="myForm" (submit)="updateEvent(id)">

      

        <div class="form-group">
          <label for="exampleInputtopic1">Event Topic</label>
          <input type="text" class="form-control" id="exampleInputtopic1"eventTopic  [(ngModel)]="event.eventTopic" aria-describedby="topicHelp" formControlName="eventTopic" [ngClass]="{ 'is-invalid': submitted && myForm.controls.eventTopic.errors }">
          <div *ngIf="myForm.controls['eventTopic'].hasError('required')" class="invalid-feedback">
              <div>eventTopic is required</div>
          </div>
        </div>
        <div class="form-group">
          <label for="exampleInputdate1">Date event </label>
          <input type="datetime-local" class="form-control" defaultValue='{{event.date}}' id="exampleInputdate1" [(ngModel)]="event.date" aria-describedby="dateHelp"  formControlName="date" [ngClass]="{ 'is-invalid': submitted && myForm.controls.date.errors }">
          <div *ngIf="myForm.controls['date'].hasError('required')" class="invalid-feedback">
              <div>Date is required</div>
          </div>
        </div>
        <div class="form-group">
          <label for="exampleFormControlTextarea1">Description</label>
          <textarea class="form-control" id="exampleFormControlTextarea1" [(ngModel)]="event.description" rows="3" formControlName="description" [ngClass]="{ 'is-invalid': submitted && myForm.controls.description.errors }"></textarea>
          <div *ngIf="myForm.controls['description'].hasError('required')" class="invalid-feedback">
              <div>Description is required</div>
          </div>
        </div>
        <div class="d-flex flex-nowrap">
        <button type="submit" class="btn btn-primary mx-2">save</button>
 
          </div>
      </form>
      </div>
</ng-template>